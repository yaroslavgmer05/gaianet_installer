#!/bin/bash

echo -e '\033[0;31m'
echo -e ' â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—'
echo -e ' â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â•'
echo -e ' â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—  '
echo -e ' â–ˆâ–ˆâ•”â•â•â•  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•  '
echo -e ' â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—'
echo -e ' â•šâ•â•     â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•'
echo -e '\033[0m'
echo -e "ğŸ”¥ ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑˆĞ¸ÑÑŒ Ğ½Ğ° @cryptofire8 Ğ² Telegram [ğŸš€]"

# Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸ Ğ½Ğ¾Ğ´Ñ‹
download_node() {
    echo "ğŸ”„ ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ² Ğ½Ğ° 8080 Ğ¿Ğ¾Ñ€Ñ‚Ñƒ..."
    sudo fuser -k 8080/tcp
    
    echo "ğŸ“¦ ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ Ğ¸ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ñ‹Ñ… Ğ¿Ğ°ĞºĞµÑ‚Ğ¾Ğ²..."
    sudo apt update && sudo apt upgrade -y
    sudo apt install -y python3-pip python3-dev python3-venv curl git build-essential tmux
    
    echo "ğŸ“Œ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Python-Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹..."
    pip3 install aiohttp
    
    echo "ğŸš€ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° GaiaNet..."
    curl -sSfL 'https://github.com/GaiaNet-AI/gaianet-node/releases/latest/download/install.sh' | bash
    source ~/.bashrc
    
    echo "ğŸ› ï¸ Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ½Ğ¾Ğ´Ñ‹ Ñ Ğ²Ñ‹Ğ±Ñ€Ğ°Ğ½Ğ½Ğ¾Ğ¹ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒÑ..."
    gaianet init --config https://raw.gaianet.ai/qwen-1.5-0.5b-chat/config.json
    
    echo "ğŸš€ Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ½Ğ¾Ğ´Ñ‹..."
    gaianet start
}

# Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ° Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ Ğ¾ Ğ½Ğ¾Ğ´Ğµ
check_states() {
    echo "ğŸ“Š ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ğ½Ğ¾Ğ´Ñ‹..."
    gaianet info
}

# Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ° Ğ»Ğ¾Ğ³Ğ¾Ğ²
check_logs() {
    echo "ğŸ“œ Ğ’Ñ‹Ğ²Ğ¾Ğ´ Ğ»Ğ¾Ğ³Ğ¾Ğ² Ğ½Ğ¾Ğ´Ñ‹..."
    journalctl -u gaianet --no-pager --lines=100
}

# Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ´Ñ‹
delete_node() {
    echo "ğŸ—‘ï¸ Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ´Ñ‹..."
    gaianet stop
    curl -sSfL 'https://github.com/GaiaNet-AI/gaianet-node/releases/latest/download/uninstall.sh' | bash
    sudo rm -rf $HOME/gaianet
    echo "âœ… ĞĞ¾Ğ´Ğ° Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ°!"
}

# Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ°
exit_from_script() {
    echo "ğŸ‘‹ Ğ’Ñ‹Ñ…Ğ¾Ğ´ Ğ¸Ğ· ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ°."
    exit 0
}

# Ğ“Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ
while true; do
    echo -e "\n\nğŸ”¥ ĞœĞµĞ½Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ GaiaNet:"
    echo "1. âœ¨ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ´Ñƒ"
    echo "2. ğŸ“Š ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ"
    echo "3. ğŸŸ¦ ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸"
    echo "4. ğŸ—‘ï¸ Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ´Ñƒ"
    echo "5. ğŸ‘‹ Ğ’Ñ‹Ğ¹Ñ‚Ğ¸ Ğ¸Ğ· ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ°"
    read -p "Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ¿ÑƒĞ½ĞºÑ‚ Ğ¼ĞµĞ½Ñ: " choice

    case $choice in
      1) download_node ;;
      2) check_states ;;
      3) check_logs ;;
      4) delete_node ;;
      5) exit_from_script ;;
      *) echo "âŒ ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ğ¿ÑƒĞ½ĞºÑ‚. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ ÑĞ½Ğ¾Ğ²Ğ°." ;;
    esac
  done
